<html>
<body bgcolor="#000" style="margin:0;padding:0">
<svg>
<circle id="circle" fill='rgb(9,9,9)' cx=200 cy=200 r=150 />
<text id="subtitle" x=50 y=300
  fill='white' font-size=24 font-family="sans">Circle</text>
</svg>
<script>
animate = function(period, thing, attr, fun) {
  return setInterval(function(){
    thing.setAttribute(attr, fun(thing))},
    period)
}
animateCX = function(circle){
  var circleWidth = circle.getAttribute('r')
  var middle = window.innerWidth / 2
  var a = middle - circleWidth
  var x = Math.sin(+(new Date())/1000)*a + middle
  return x
}
circle = document.getElementById('circle')
a = animate(20, circle, 'cx', animateCX)

animateSubTitle = function(subtitle) {
  subtitle.innerHTML = "Circle " + circle.getAttribute("fill")
  return window.innerHeight / 2
}
subtitle = document.getElementById('subtitle')
s = animate(50, subtitle, 'y', animateSubTitle)

darken = function(thing) {
  var fill = thing.getAttribute('fill')
  var triple = fill.match(/\d+/g)
  var r = +triple[0]
  var g = +triple[1]
  var b = +triple[2]
  // 9,9,9 -> 9,9,8 -> 8,9,8 -> 8,8,8
  if(0) {
  } else if(b >= r && b >= g) {
    b -= 1
  } else if(r >= g && r >= b) {
    r -= 1
  } else {
    g -= 1
  }
  fill = "rgb(" + r + "," + g + "," + b + ")"
  thing.setAttribute('fill', fill)
}

lighten = function(thing) {
  var fill = thing.getAttribute('fill')
  var triple = fill.match(/\d+/g)
  var r = +triple[0]
  var g = +triple[1]
  var b = +triple[2]
  // 9,9,9 <- 9,9,8 <- 8,9,8 <- 8,8,8
  if(0) {
  } else if(g <= r && g <= b) {
    g += 1
  } else if(r <= g && r <= b) {
    r += 1
  } else {
    b += 1
  }
  fill = "rgb(" + r + "," + g + "," + b + ")"
  thing.setAttribute('fill', fill)
}

document.onkeypress = function(e) {
  if(e.keyCode == 100) { // 'd'
    darken(circle)
  }
  if(e.keyCode == 108) { // 'l'
    lighten(circle)
  }
}
</script>
</body>
</html>
